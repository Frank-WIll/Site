import{_ as fe}from"./C647goJZ.js";import{m as pe,c as ve}from"./DClGm7F4.js";import{r as D,d as W,a4 as he,E as V,N as P,i as A,w as L,f as R,P as u,a5 as U,aM as O,O as de,aB as me,a7 as ge,X as ye,a6 as be,y as xe,H as Ce,aa as ke,c as N,g as G,n as K,a2 as Te,F as ne,a8 as Ee,a9 as Ie,e as le,t as _e}from"./NTENsdai.js";import{_ as we}from"./COUz3yXs.js";import{t as ae}from"./CvFxQ3fd.js";import{r as Se,u as se,c as Ke,h as Ae}from"./GIit8Q6m.js";import{g as j,_ as Ve,M as Re,u as Be,a as Le}from"./BFUPVesp.js";import{u as $e}from"./CcRoBTp8.js";import{i as re}from"./y1qtJ0Us.js";import{P as ce}from"./Cvz8euzd.js";import"./Cz5XM2TM.js";function ie(l,t,e){const i=e.originalEvent.target,y=new CustomEvent(l,{bubbles:!1,cancelable:!0,detail:e});t&&i.addEventListener(l,t,{once:!0}),i.dispatchEvent(y)}function Me(l){const t=Se("",1e3);return{search:t,handleTypeaheadSearch:(y,a)=>{t.value=t.value+y;{const o=j(),p=a.map(b=>{var _,C;return{...b,textValue:((_=b.value)==null?void 0:_.textValue)??((C=b.ref.textContent)==null?void 0:C.trim())??""}}),r=p.find(b=>b.ref===o),v=p.map(b=>b.textValue),w=Ne(v,t.value,r==null?void 0:r.textValue),x=p.find(b=>b.textValue===w);return x&&x.ref.focus(),x==null?void 0:x.ref}},resetTypeahead:()=>{t.value=""}}}function De(l,t){return l.map((e,i)=>l[(t+i)%l.length])}function Ne(l,t,e){const y=t.length>1&&Array.from(t).every(v=>v===t[0])?t[0]:t,a=e?l.indexOf(e):-1;let o=De(l,Math.max(a,0));y.length===1&&(o=o.filter(v=>v!==e));const r=o.find(v=>v.toLowerCase().startsWith(y.toLowerCase()));return r!==e?r:void 0}function H(l,t,e){const i=l.findIndex(p=>re(p,t)),y=l.findIndex(p=>re(p,e));if(i===-1||y===-1)return[];const[a,o]=[i,y].sort((p,r)=>p-r);return l.slice(a,o+1)}function q(l){return l.reduce((t,e)=>(t.push(e),e.children&&t.push(...q(e.children)),t),[])}function Oe(l,t){const e=D(),i=(a,o)=>{if(t.multiple&&Array.isArray(l.value))if(t.selectionBehavior==="replace")l.value=[a],e.value=a;else{const p=l.value.findIndex(r=>o(r));p!==-1?l.value.splice(p,1):l.value.push(a)}else t.selectionBehavior==="replace"?l.value={...a}:!Array.isArray(l.value)&&o(l.value)?l.value=void 0:l.value={...a};return l.value};function y(a,o,p,r){var b;if(!(e!=null&&e.value)||!t.multiple||!Array.isArray(l.value))return;const w=(b=p().filter(_=>_.ref.dataset.disabled!=="").find(_=>_.ref===o))==null?void 0:b.value;if(!w)return;let x=null;switch(a){case"prev":case"next":{x=H(r,e.value,w);break}case"first":{x=H(r,e.value,r==null?void 0:r[0]);break}case"last":{x=H(r,e.value,r==null?void 0:r[r.length-1]);break}}l.value=x}return{firstValue:e,onSelectItem:i,handleMultipleReplace:y}}const[Pe,We]=Ke("TreeRoot"),ze=W({__name:"TreeRoot",props:{modelValue:{},defaultValue:{},items:{},expanded:{},defaultExpanded:{},getKey:{},getChildren:{type:Function,default:l=>l.children},selectionBehavior:{default:"toggle"},multiple:{type:Boolean},dir:{},disabled:{type:Boolean},propagateSelect:{type:Boolean},asChild:{type:Boolean},as:{default:"ul"}},emits:["update:modelValue","update:expanded"],setup(l,{emit:t}){const e=l,i=t,{items:y,multiple:a,disabled:o,propagateSelect:p,dir:r}=he(e),{handleTypeaheadSearch:v}=Me(),w=$e(r),x=D(),b=D(!1),_=Ae(),C=se(e,"modelValue",i,{defaultValue:e.defaultValue??(a.value?[]:void 0),passive:e.modelValue===void 0,deep:!0}),d=se(e,"expanded",i,{defaultValue:e.defaultExpanded??[],passive:e.expanded===void 0,deep:!0}),{onSelectItem:m,handleMultipleReplace:n}=Oe(C,e),c=V(()=>a.value&&Array.isArray(C.value)?C.value.map(s=>e.getKey(s)):[e.getKey(C.value??{})]);function f(s,h=1,E){return s.reduce((I,S,B)=>{const $=e.getKey(S),M=e.getChildren(S),z=d.value.includes($),F={_id:$,value:S,index:B,level:h,parentItem:E,hasChildren:!!M,bind:{value:S,level:h,"aria-setsize":s.length,"aria-posinset":B+1}};return I.push(F),M&&z&&I.push(...f(M,h+1,S)),I},[])}const g=V(()=>{const s=e.items;return d.value.map(h=>h),f(s??[])});function k(s){var h;if(b.value)_.trigger(s);else{const E=((h=x.value)==null?void 0:h.getItems())??[];v(s.key,E)}}function T(s){if(b.value)return;const h=Re[s.key];me(()=>{var E;n(h,j(),(E=x.value)==null?void 0:E.getItems,g.value.map(I=>I.value))})}return We({modelValue:C,selectedKeys:c,onSelect:s=>{var I;const h=S=>e.getKey(S??{})===e.getKey(s),E=e.multiple&&Array.isArray(C.value)?((I=C.value)==null?void 0:I.findIndex(h))!==-1:void 0;if(m(s,h),e.propagateSelect&&e.multiple&&Array.isArray(C.value)){const S=q(e.getChildren(s)??[]);E?C.value=[...C.value].filter(B=>!S.some($=>e.getKey(B??{})===e.getKey($))):C.value=[...C.value,...S]}},expanded:d,onToggle(s){if(!(s?e.getChildren(s):void 0))return;const E=e.getKey(s)??s;d.value.includes(E)?d.value=d.value.filter(I=>I!==E):d.value.push(E)},getKey:e.getKey,getChildren:e.getChildren,items:y,expandedItems:g,disabled:o,multiple:a,dir:w,propagateSelect:p,isVirtual:b,virtualKeydownHook:_,handleMultipleReplace:n}),(s,h)=>(A(),P(u(Ve),{ref_key:"rovingFocusGroupRef",ref:x,"as-child":"",orientation:"vertical",dir:u(w)},{default:L(()=>[R(u(ce),{role:"tree",as:s.as,"as-child":s.asChild,"aria-multiselectable":u(a)?!0:void 0,onKeydown:[k,U(O(T,["shift"]),["up","down"])]},{default:L(()=>[de(s.$slots,"default",{flattenItems:g.value,modelValue:u(C),expanded:u(d)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),Fe="tree.select",Ge="tree.toggle",Ue=W({inheritAttrs:!1,__name:"TreeItem",props:{value:{},level:{},asChild:{type:Boolean},as:{default:"li"}},emits:["select","toggle"],setup(l,{expose:t,emit:e}){const i=l,y=e,a=Pe(),{getItems:o}=Be(),p=V(()=>!!a.getChildren(i.value)),r=V(()=>{const n=a.getKey(i.value);return a.expanded.value.includes(n)}),v=V(()=>{const n=a.getKey(i.value);return a.selectedKeys.value.includes(n)}),w=V(()=>{if(a.propagateSelect.value&&v.value&&p.value&&Array.isArray(a.modelValue.value))return!q(a.getChildren(i.value)||[]).every(c=>a.modelValue.value.find(f=>a.getKey(f)===a.getKey(c)))});function x(n){if(p.value)if(r.value){const c=o().map(s=>s.ref),f=j(),g=c.indexOf(f),T=[...c].slice(g).find(s=>Number(s.getAttribute("data-indent"))===i.level+1);T&&T.focus()}else m(n)}function b(n){if(r.value)m(n);else{const c=o().map(s=>s.ref),f=j(),g=c.indexOf(f),T=[...c].slice(0,g).reverse().find(s=>Number(s.getAttribute("data-indent"))===i.level-1);T&&T.focus()}}async function _(n){y("select",n),!(n!=null&&n.defaultPrevented)&&a.onSelect(i.value)}async function C(n){y("toggle",n),!(n!=null&&n.defaultPrevented)&&a.onToggle(i.value)}async function d(n){if(!n)return;const c={originalEvent:n,value:i.value,isExpanded:r.value,isSelected:v.value};ie(Fe,_,c)}async function m(n){if(!n)return;const c={originalEvent:n,value:i.value,isExpanded:r.value,isSelected:v.value};ie(Ge,C,c)}return t({isExpanded:r,isSelected:v,isIndeterminate:w,handleToggle:()=>a.onToggle(i.value),handleSelect:()=>a.onSelect(i.value)}),(n,c)=>(A(),P(u(Le),{"as-child":"",value:n.value,"allow-shift-key":""},{default:L(()=>[R(u(ce),ge(n.$attrs,{role:"treeitem",as:n.as,"as-child":n.asChild,"aria-selected":v.value,"aria-expanded":p.value?r.value:void 0,"aria-level":n.level,"data-indent":n.level,"data-selected":v.value?"":void 0,"data-expanded":r.value?"":void 0,onKeydown:[U(O(d,["self","prevent"]),["enter","space"]),c[0]||(c[0]=U(O(f=>u(a).dir.value==="ltr"?x(f):b(f),["prevent"]),["right"])),c[1]||(c[1]=U(O(f=>u(a).dir.value==="ltr"?b(f):x(f),["prevent"]),["left"]))],onClick:c[2]||(c[2]=O(f=>{d(f),m(f)},["stop"]))}),{default:L(()=>[de(n.$slots,"default",{isExpanded:r.value,isSelected:v.value,isIndeterminate:w.value,handleSelect:()=>u(a).onSelect(n.value),handleToggle:()=>u(a).onToggle(n.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}});function je(l={}){const{inheritAttrs:t=!0}=l,e=ye(),i=W({setup(a,{slots:o}){return()=>{e.value=o.default}}}),y=W({inheritAttrs:t,props:l.props,setup(a,{attrs:o,slots:p}){return()=>{var r;e.value;const v=(r=e.value)==null?void 0:r.call(e,{...l.props==null?He(o):a,$slots:p});return t&&(v==null?void 0:v.length)===1?v[0]:v}}});return pe({define:i,reuse:y},[i,y])}function He(l){const t={};for(const e in l)t[ve(e)]=l[e];return t}const qe={slots:{root:"relative lg:h-[450px] my-5 grid lg:grid-cols-3 border border-(--ui-border-muted) rounded-[calc(var(--ui-radius)*1.5)]",list:"isolate relative p-2 border-b lg:border-b-0 lg:border-e border-(--ui-border-muted) overflow-y-auto",item:"",listWithChildren:"ms-4.5 border-s border-(--ui-border)",itemWithChildren:"ps-1.5 -ms-px",link:"relative group peer w-full px-2.5 py-1.5 before:inset-y-px before:inset-x-0 flex items-center gap-1.5 text-sm before:absolute before:z-[-1] before:rounded-[calc(var(--ui-radius)*1.5)] focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"size-4 shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"size-5 transform transition-transform duration-200 shrink-0 group-data-expanded:rotate-180",content:"overflow-hidden lg:col-span-2 flex flex-col [&>div]:my-0 [&>div]:flex-1 [&>div]:flex [&>div]:flex-col [&>div>div]:border-0 [&>div>pre]:border-b-0 [&>div>pre]:border-s-0 [&>div>pre]:border-e-0 [&>div>pre]:rounded-l-none [&>div>pre]:flex-1 [&>div]:overflow-y-auto"},variants:{active:{true:{link:"text-(--ui-text-highlighted) before:bg-(--ui-bg-elevated)"},false:{link:["hover:text-(--ui-text-highlighted) hover:before:bg-(--ui-bg-elevated)/50","transition-colors before:transition-colors"]}}}},Xe=Ie;var oe,ue;const Ye=ae({extend:ae(qe),...((ue=(oe=Xe.uiPro)==null?void 0:oe.prose)==null?void 0:ue.codeTree)||{}}),ot=W({__name:"CodeTree",props:{defaultValue:{},class:{},ui:{}},setup(l){const t=l,e=be(),i=xe(),[y,a]=je(),o=Ye(),p=D(t.defaultValue?{path:t.defaultValue}:void 0),r=D(),v=D(1),w=V(()=>{var d,m;return v.value,((m=(d=e.default)==null?void 0:d.call(e))==null?void 0:m.flatMap(_).filter(Boolean))||[]}),x=V(()=>b(w.value));function b(d){const m=new Map,n=[];d.forEach(f=>{const g=f.label.split("/");let k="";g.forEach((T,s)=>{var h,E;if(k=k?`${k}/${T}`:T,!m.has(k)){const I={label:T,path:k,...s<g.length-1&&{children:[]}};m.set(k,I),s===0?n.push(I):(E=(h=m.get(g.slice(0,s).join("/")))==null?void 0:h.children)==null||E.push(I)}})});const c=f=>f.sort((g,k)=>!!g.children==!!k.children?g.label.localeCompare(k.label):k.children?1:-1).map(g=>({...g,children:g.children&&c(g.children)}));return c(n)}function _(d,m){var n,c,f,g;return typeof d.type=="symbol"?(n=d.children)==null?void 0:n.map(_):{label:((c=d.props)==null?void 0:c.filename)||((f=d.props)==null?void 0:f.label)||`${m}`,icon:(g=d.props)==null?void 0:g.icon,component:d}}const C=V(()=>{var n;const d=(n=p.value)==null?void 0:n.path;if(!d)return[];const m=d.split("/");return m.map((c,f)=>m.slice(0,f+1).join("/"))});return Ce(p,d=>{const m=w.value.find(n=>(d==null?void 0:d.path)===n.label);m!=null&&m.component&&(r.value=m)},{immediate:!0}),ke(()=>v.value++),(d,m)=>{var c,f,g,k;const n=fe;return A(),N(ne,null,[R(u(y),null,{default:L(({items:T,level:s})=>[(A(!0),N(ne,null,Ee(T,(h,E)=>{var I,S;return A(),N("li",{key:`${s}-${E}`,class:K(s>0?u(o).itemWithChildren({class:(I=t.ui)==null?void 0:I.itemWithChildren}):u(o).item({class:(S=t.ui)==null?void 0:S.item}))},[R(u(Ue),{"as-child":"",level:s,value:h},{default:L(({isExpanded:B,isSelected:$})=>{var M,z,F,X,Y,J,Q,Z,ee,te;return[G("button",{class:K(u(o).link({class:(M=t.ui)==null?void 0:M.link,active:$}))},[(z=h.children)!=null&&z.length?(A(),P(n,{key:0,name:B?u(i).ui.icons.folderOpen:u(i).ui.icons.folder,class:K(u(o).linkLeadingIcon({class:(F=t.ui)==null?void 0:F.linkLeadingIcon}))},null,8,["name","class"])):(A(),P(we,{key:1,filename:h.label,class:K(u(o).linkLeadingIcon({class:(X=t.ui)==null?void 0:X.linkLeadingIcon}))},null,8,["filename","class"])),G("span",{class:K(u(o).linkLabel({class:(Y=t.ui)==null?void 0:Y.linkLabel}))},_e(h.label),3),(J=h.children)!=null&&J.length?(A(),N("span",{key:2,class:K(u(o).linkTrailing({class:(Q=t.ui)==null?void 0:Q.linkTrailing}))},[R(n,{name:u(i).ui.icons.chevronDown,class:K(u(o).linkTrailingIcon({class:(Z=t.ui)==null?void 0:Z.linkTrailingIcon}))},null,8,["name","class"])],2)):le("",!0)],2),(ee=h.children)!=null&&ee.length&&B?(A(),N("ul",{key:0,class:K(u(o).listWithChildren({class:(te=t.ui)==null?void 0:te.listWithChildren}))},[R(u(a),{items:h.children,level:s+1},null,8,["items","level"])],2)):le("",!0)]}),_:2},1032,["level","value"])],2)}),128))]),_:1}),G("div",{class:K(u(o).root({class:[t.class,(c=t.ui)==null?void 0:c.root]}))},[R(u(ze),{modelValue:p.value,"onUpdate:modelValue":m[0]||(m[0]=T=>p.value=T),class:K(u(o).list({class:(f=t.ui)==null?void 0:f.list})),items:x.value,"get-key":T=>T.path,"default-expanded":C.value},{default:L(()=>[R(u(a),{items:x.value,level:0},null,8,["items"])]),_:1},8,["modelValue","class","items","get-key","default-expanded"]),G("div",{class:K(u(o).content({class:(g=t.ui)==null?void 0:g.content}))},[(A(),P(Te((k=r.value)==null?void 0:k.component)))],2)],2)],64)}}});export{ot as default};
